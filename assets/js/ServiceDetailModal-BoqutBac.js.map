{"version":3,"file":"ServiceDetailModal-BoqutBac.js","sources":["../../../src/components/ServiceDetailModal.tsx"],"sourcesContent":["import React from 'react';\r\nimport { Link, useLocation } from 'wouter';\r\nimport StatusBadge from './StatusBadge';\r\nimport { Service, UptimeHistory, Incident } from '../types';\r\nimport { getServiceIcon } from '../lib/icons';\r\nimport { formatTimeAgo } from '../lib/utils';\r\nimport { useSettings } from '@/hooks/use-settings';\r\n\r\ninterface ServiceDetailModalProps {\r\n  service: Service | null;\r\n  history: UptimeHistory[];\r\n  incidents: Incident[];\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n}\r\n\r\nconst ServiceDetailModal: React.FC<ServiceDetailModalProps> = ({\r\n  service,\r\n  history,\r\n  incidents,\r\n  isOpen,\r\n  onClose,\r\n}) => {\r\n  const [_, navigate] = useLocation();\r\n  const { t, language } = useSettings();\r\n\r\n  React.useEffect(() => {\r\n    const handleEsc = (e: KeyboardEvent) => {\r\n      if (e.key === 'Escape') onClose();\r\n    };\r\n    window.addEventListener('keydown', handleEsc);\r\n    return () => window.removeEventListener('keydown', handleEsc);\r\n  }, [onClose]);\r\n\r\n  if (!service || !isOpen) return null;\r\n\r\n  const {\r\n    name,\r\n    logo,\r\n    status,\r\n    responseTime,\r\n    lastChecked,\r\n    uptimePercentage,\r\n    slug,\r\n  } = service;\r\n\r\n  const formattedLastChecked = lastChecked ? formatTimeAgo(lastChecked, language) : t.unknown || 'Unknown';\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black bg-opacity-60\">\r\n      <div className=\"relative w-[95vw] max-w-3xl bg-dark-light rounded-lg shadow-xl max-h-[90vh] flex flex-col overflow-hidden\">\r\n        <div className=\"sticky top-0 z-20 flex items-center justify-between gap-4 p-4 border-b bg-dark-light/90 backdrop-blur-sm border-dark-lighter\">\r\n          <div className=\"flex items-center gap-3\">\r\n            <i className={(logo || getServiceIcon(name)) + ' text-2xl text-primary'} />\r\n            <div>\r\n              <h3 className=\"text-lg font-bold leading-tight\">{name}</h3>\r\n              <div className=\"flex items-center gap-2 text-xs text-gray-400 mt-0.5\">\r\n                <StatusBadge status={status} className=\"mr-0\" />\r\n                <span>{t.lastCheck} {formattedLastChecked}</span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"flex items-center gap-2\">\r\n            <button\r\n              onClick={onClose}\r\n              className=\"p-2 transition-all duration-200 rounded-lg group hover:bg-dark-lighter focus:outline-none focus:ring-2 focus:ring-primary/40\"\r\n              aria-label=\"Chiudi\"\r\n            >\r\n              <i className=\"transition-colors duration-200 fas fa-times text-muted-foreground group-hover:text-foreground\" />\r\n            </button>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"flex-1 p-6 overflow-y-auto scrollbar-hide\">\r\n          <div className=\"mb-4\">\r\n            <h4 className=\"text-base font-semibold text-muted-foreground\">{'Overview'}</h4>\r\n          </div>\r\n\r\n          <div className=\"grid grid-cols-2 gap-4 mb-6 sm:grid-cols-3\">\r\n            <div className=\"p-4 rounded-lg bg-dark-lighter\">\r\n              <p className=\"mb-1 text-xs text-gray-400\">{t.responseTime || 'Response Time'}</p>\r\n              <p className=\"font-mono text-lg\">{status === 'down' ? 'Timeout' : `${responseTime}ms`}</p>\r\n            </div>\r\n            <div className=\"p-4 rounded-lg bg-dark-lighter\">\r\n              <p className=\"mb-1 text-xs text-gray-400\">{t.uptime30d || 'Uptime (30d)'}</p>\r\n              <p className=\"font-mono text-lg\">{uptimePercentage}%</p>\r\n            </div>\r\n            <div className=\"col-span-2 p-4 rounded-lg bg-dark-lighter sm:col-span-1\">\r\n              <p className=\"mb-1 text-xs text-gray-400\">{t.lastOutage || 'Last Outage'}</p>\r\n              <p className=\"font-mono text-base truncate\">\r\n                {incidents.length > 0\r\n                  ? formatTimeAgo(incidents[0].startTime, language)\r\n                  : t.noRecentOutages || 'No recent outages'}\r\n              </p>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"text-center\">\r\n            <Link\r\n              href={`/services/${slug}`}\r\n              onClick={(e) => {\r\n                e.preventDefault();\r\n                onClose();\r\n                navigate(`/services/${slug}`);\r\n              }}\r\n              className=\"inline-flex items-center justify-center px-4 py-2 text-sm font-medium transition-colors duration-200 rounded-md text-primary hover:text-primary/80 hover:bg-muted/50\"\r\n            >\r\n              {t.viewDetails || 'View Details'} â†’\r\n            </Link>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ServiceDetailModal;\r\n"],"names":["ServiceDetailModal","service","history","incidents","isOpen","onClose","_","navigate","useLocation","t","language","useSettings","React","useEffect","handleEsc","e","key","window","addEventListener","removeEventListener","name","logo","status","responseTime","lastChecked","uptimePercentage","slug","formattedLastChecked","formatTimeAgo","unknown","className","children","jsxs","jsx","getServiceIcon","StatusBadge","lastCheck","onClick","uptime30d","lastOutage","length","startTime","noRecentOutages","Link","href","preventDefault","viewDetails"],"mappings":"4PAgBA,MAAMA,EAAwD,EAC5DC,UACAC,UACAC,YACAC,SACAC,cAEA,MAAOC,EAAGC,GAAYC,KAChBC,EAAEA,EAAAC,SAAGA,GAAaC,IAUxB,GARAC,EAAMC,UAAU,KACd,MAAMC,EAAaC,IACH,WAAVA,EAAEC,KAAkBX,KAG1B,OADAY,OAAOC,iBAAiB,UAAWJ,GAC5B,IAAMG,OAAOE,oBAAoB,UAAWL,IAClD,CAACT,KAECJ,IAAYG,EAAQ,OAAO,KAEhC,MAAMgB,KACJA,EAAAC,KACAA,EAAAC,OACAA,EAAAC,aACAA,EAAAC,YACAA,EAAAC,iBACAA,EAAAC,KACAA,GACEzB,EAEE0B,EAAuBH,EAAcI,EAAcJ,EAAad,GAAYD,EAAEoB,SAAW,UAE/F,aACG,MAAA,CAAIC,UAAU,iFACbC,SAAAC,EAAAA,KAAC,MAAA,CAAIF,UAAU,4GACbC,SAAA,CAAAC,EAAAA,KAAC,MAAA,CAAIF,UAAU,+HACbC,SAAA,CAAAC,EAAAA,KAAC,MAAA,CAAIF,UAAU,0BACbC,SAAA,CAAAE,MAAC,KAAEH,WAAYT,GAAQa,EAAed,IAAS,kCAC9C,MAAA,CACCW,SAAA,CAAAE,EAAAA,IAAC,KAAA,CAAGH,UAAU,kCAAmCC,SAAAX,IACjDY,EAAAA,KAAC,MAAA,CAAIF,UAAU,uDACbC,SAAA,CAAAE,EAAAA,IAACE,EAAA,CAAYb,SAAgBQ,UAAU,gBACtC,OAAA,CAAMC,SAAA,CAAAtB,EAAE2B,UAAU,IAAET,cAK3BM,EAAAA,IAAC,MAAA,CAAIH,UAAU,0BACbC,SAAAE,EAAAA,IAAC,SAAA,CACCI,QAAShC,EACTyB,UAAU,+HACV,aAAW,SAEXC,SAAAE,EAAAA,IAAC,IAAA,CAAEH,UAAU,yGAKnBE,EAAAA,KAAC,MAAA,CAAIF,UAAU,4CACbC,SAAA,CAAAE,EAAAA,IAAC,MAAA,CAAIH,UAAU,OACbC,SAAAE,EAAAA,IAAC,MAAGH,UAAU,gDAAiDC,wBAGjEC,EAAAA,KAAC,MAAA,CAAIF,UAAU,6CACbC,SAAA,CAAAC,EAAAA,KAAC,MAAA,CAAIF,UAAU,iCACbC,SAAA,CAAAE,MAAC,IAAA,CAAEH,UAAU,6BAA8BC,SAAAtB,EAAEc,cAAgB,kBAC7DU,EAAAA,IAAC,KAAEH,UAAU,oBAAqBC,SAAW,WAAS,UAAY,GAAGR,WAEvES,EAAAA,KAAC,MAAA,CAAIF,UAAU,iCACbC,SAAA,CAAAE,MAAC,IAAA,CAAEH,UAAU,6BAA8BC,SAAAtB,EAAE6B,WAAa,iBAC1DN,EAAAA,KAAC,IAAA,CAAEF,UAAU,oBAAqBC,SAAA,CAAAN,EAAiB,UAErDO,EAAAA,KAAC,MAAA,CAAIF,UAAU,0DACbC,SAAA,CAAAE,MAAC,IAAA,CAAEH,UAAU,6BAA8BC,SAAAtB,EAAE8B,YAAc,sBAC1D,IAAA,CAAET,UAAU,+BACVC,SAAA5B,EAAUqC,OAAS,EAChBZ,EAAczB,EAAU,GAAGsC,UAAW/B,GACtCD,EAAEiC,iBAAmB,4BAK/BT,EAAAA,IAAC,MAAA,CAAIH,UAAU,cACbC,SAAAC,EAAAA,KAACW,EAAA,CACCC,KAAM,aAAalB,IACnBW,QAAUtB,IACRA,EAAE8B,iBACFxC,IACAE,EAAS,aAAamB,MAExBI,UAAU,uKAETC,SAAA,CAAAtB,EAAEqC,aAAe,eAAe"}