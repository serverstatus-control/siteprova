import{a0 as e,a1 as t}from"./vendor-C1u4FD2K.js";import{r,u as s,b as n}from"./react-vendor-BCKZ37BP.js";const o="pushState",a="replaceState",c=["popstate",o,a,"hashchange"],l=e=>{for(const t of c)addEventListener(t,e);return()=>{for(const t of c)removeEventListener(t,e)}},i=(t,r)=>e.useSyncExternalStore(l,t,r),h=()=>location.search,u=()=>location.pathname,f=({ssrPath:e}={})=>i(u,e?()=>e:u),p=(e,{replace:t=!1,state:r=null}={})=>history[t?a:o](r,"",e),d=Symbol.for("wouter_v3");if("undefined"!=typeof history&&void 0===window[d]){for(const e of[o,a]){const t=history[e];history[e]=function(){const r=t.apply(this,arguments),s=new Event(e);return s.arguments=arguments,dispatchEvent(s),r}}Object.defineProperty(window,d,{value:!0})}const m=(e="")=>"/"===e?"":e,y=(e="",t)=>((e,t)=>t.toLowerCase().indexOf(e.toLowerCase())?"~"+t:t.slice(e.length)||"/")(v(m(e)),v(t)),v=e=>{try{return decodeURI(e)}catch(t){return e}},b={hook:(e={})=>[f(e),p],searchHook:({ssrSearch:e=""}={})=>i(h,()=>e),parser:t,base:"",ssrPath:void 0,ssrSearch:void 0,ssrContext:void 0,hrefs:e=>e},E=r.createContext(b),k=()=>r.useContext(E),C={},x=r.createContext(C),g=e=>{const[t,r]=e.hook(e);return[y(e.base,t),s((t,s)=>r(((e,t)=>"~"===e[0]?e.slice(1):m(t)+e)(t,e.base),s))]},w=()=>g(k()),S=(e,t,r,s)=>{const{pattern:n,keys:o}=t instanceof RegExp?{keys:!1,pattern:t}:e(t||"*",s),a=n.exec(r)||[],[c,...l]=a;return void 0!==c?[!0,(()=>{const e=!1!==o?Object.fromEntries(o.map((e,t)=>[e,l[t]])):a.groups;let t={...l};return e&&Object.assign(t,e),t})(),...s?[c]:[]]:[!1,null]},j=e=>S(k().parser,e,w()[0]),P=({children:e,...t})=>{const s=k(),n=t.hook?b:s;let o=n;const[a,c]=t.ssrPath?.split("?")??[];c&&(t.ssrSearch=c,t.ssrPath=a),t.hrefs=t.hrefs??t.hook?.hrefs;let l=r.useRef({}),i=l.current,h=i;for(let r in n){const e="base"===r?n[r]+(t[r]||""):t[r]||n[r];i===h&&e!==h[r]&&(l.current=h={...h}),h[r]=e,e===n[r]&&e===o[r]||(o=h)}return r.createElement(E.Provider,{value:o,children:e})},O=({children:e,component:t},s)=>t?r.createElement(t,{params:s}):"function"==typeof e?e(s):e,R=({path:e,nest:t,match:s,...n})=>{const o=k(),[a]=g(o),[c,l,i]=s??S(o.parser,e,a,t),h=(e=>{let t=r.useRef(C);const s=t.current;return t.current=Object.keys(e).length!==Object.keys(s).length||Object.entries(e).some(([e,t])=>t!==s[e])?e:s})({...r.useContext(x),...l});if(!c)return null;const u=i?r.createElement(P,{base:i},O(n,h)):O(n,h);return r.createElement(x.Provider,{value:h,children:u})},L=r.forwardRef((e,t)=>{const n=k(),[o,a]=g(n),{to:c="",href:l=c,onClick:i,asChild:h,children:u,className:f,replace:p,state:d,...m}=e,y=s(t=>{t.ctrlKey||t.metaKey||t.altKey||t.shiftKey||0!==t.button||(i?.(t),t.defaultPrevented||(t.preventDefault(),a(l,e)))}),v=n.hrefs("~"===l[0]?l.slice(1):n.base+l,n);return h&&r.isValidElement(u)?r.cloneElement(u,{onClick:y,href:v}):r.createElement("a",{...m,onClick:y,href:v,className:f?.call?f(o===l):f,children:u,ref:t})}),K=e=>Array.isArray(e)?e.flatMap(e=>K(e&&e.type===r.Fragment?e.props.children:e)):[e],A=({children:e,location:t})=>{const s=k(),[n]=g(s);for(const o of K(e)){let e=0;if(r.isValidElement(o)&&(e=S(s.parser,o.props.path,t||n,o.props.nest))[0])return r.cloneElement(o,{match:e})}return null},N=e=>{const{to:t,href:r=t}=e,o=k(),[,a]=g(o),c=s(()=>a(t||r,e)),{ssrContext:l}=o;return n(()=>{c()},[]),l&&(l.redirectTo=t),null};export{L,R,A as S,N as a,P as b,j as c,w as u};
//# sourceMappingURL=router-CS916hjU.js.map
