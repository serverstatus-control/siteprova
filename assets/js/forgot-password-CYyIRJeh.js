import{r as e,j as s}from"./react-vendor-BTtMfXVs.js";import{u as r}from"./router-BGylx-d0.js";import{C as a,J as t,K as i,M as l,a as n,I as c,N as o,B as d}from"./ui-components-DRL8qVLK.js";import"./vendor-BOHXtaP9.js";import"./radix-ui-ByoYm48K.js";function m(){const[m,u]=r(),[p,x]=e.useState(""),[h,j]=e.useState(null),[f,b]=e.useState(null),[v,N]=e.useState(!1);return s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background p-4",children:s.jsx("div",{className:"w-full max-w-sm",children:s.jsxs(a,{className:"border-border/40 shadow-lg",children:[s.jsxs(t,{className:"space-y-3",children:[s.jsx(i,{className:"text-2xl text-center font-semibold",children:"Recupero Password"}),s.jsx(l,{className:"text-center text-muted-foreground",children:"Inserisci la tua email per ricevere il link di reset. Ti invieremo una email con le istruzioni per reimpostare la password."})]}),s.jsxs("form",{onSubmit:async e=>{e.preventDefault(),N(!0),j(null);try{const e=await fetch("/api/forgot-password",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({email:p})}),s=await e.json().catch(()=>({}));j(s?.message||"Se l'email Ã¨ registrata, riceverai istruzioni per il reset.")}catch(s){j("Errore di rete")}finally{N(!1)}},children:[s.jsxs(n,{className:"space-y-4 pt-2",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-sm font-medium text-foreground/90",children:"Email"}),s.jsx(c,{type:"email",value:p,onChange:e=>x(e.target.value),placeholder:"La tua email",className:"h-10",required:!0})]}),h&&s.jsxs("div",{className:"p-3 rounded-md text-sm "+(h.includes("error")?"bg-destructive/10 text-destructive border border-destructive/20":"bg-muted/50 text-muted-foreground border border-border/50"),children:[s.jsx("pre",{className:"whitespace-pre-wrap break-words",children:h}),f&&s.jsxs("div",{className:"mt-2 flex items-center gap-2 text-xs",children:[s.jsx("a",{href:f,className:"text-primary hover:underline",target:"_blank",rel:"noreferrer",children:"Apri link di reset (dev)"}),s.jsx("button",{type:"button",className:"px-2 py-1 border border-border/50 rounded hover:bg-muted/70",onClick:()=>navigator.clipboard.writeText(f),children:"Copia link"})]})]})]}),s.jsxs(o,{className:"flex-col space-y-2",children:[s.jsx(d,{type:"submit",className:"w-full",disabled:v,children:v?s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("i",{className:"fas fa-spinner fa-spin"}),s.jsx("span",{children:"Invio in corso..."})]}):"Invia link di reset"}),s.jsx(d,{variant:"ghost",type:"button",onClick:()=>u("/auth"),className:"w-full",children:"Torna al login"})]})]})]})})})}export{m as default};
