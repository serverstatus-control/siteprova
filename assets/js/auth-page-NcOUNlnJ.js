import{r as e,j as s,S as r,aK as a,aL as i,aM as n,aN as o,aO as t,aP as l,aQ as d,aR as c,aS as m,aG as x}from"./react-vendor-BC-NryIe.js";import{u as f}from"./router-MOUxwqPK.js";import{e as u,L as j,i as h,u as p,B as g,C as w,x as b,y as N,z as v,A as y,E as P,G as I,I as S}from"./index-DKvbMkMl.js";import{t as R,z as C}from"./forms-Cf6uUqBP.js";import{I as F}from"./input-9JScP5_X.js";import"./vendor-BQl0nyRy.js";import"./radix-ui-ByoYm48K.js";const D=a,k=e.createContext({}),L=({...e})=>s.jsx(k.Provider,{value:{name:e.name},children:s.jsx(i,{...e})}),M=()=>{const s=e.useContext(k),r=e.useContext(z),{getFieldState:a,formState:i}=n(),o=a(s.name,i);if(!s)throw new Error("useFormField should be used within <FormField>");const{id:t}=r;return{id:t,name:s.name,formItemId:`${t}-form-item`,formDescriptionId:`${t}-form-item-description`,formMessageId:`${t}-form-item-message`,...o}},z=e.createContext({}),A=e.forwardRef(({className:r,...a},i)=>{const n=e.useId();return s.jsx(z.Provider,{value:{id:n},children:s.jsx("div",{ref:i,className:u("space-y-2",r),...a})})});A.displayName="FormItem";const E=e.forwardRef(({className:e,...r},a)=>{const{error:i,formItemId:n}=M();return s.jsx(j,{ref:a,className:u(i&&"text-destructive",e),htmlFor:n,...r})});E.displayName="FormLabel";const $=e.forwardRef(({...e},a)=>{const{error:i,formItemId:n,formDescriptionId:o,formMessageId:t}=M();return s.jsx(r,{ref:a,id:n,"aria-describedby":i?`${o} ${t}`:`${o}`,"aria-invalid":!!i,...e})});$.displayName="FormControl";e.forwardRef(({className:e,...r},a)=>{const{formDescriptionId:i}=M();return s.jsx("p",{ref:a,id:i,className:u("text-sm text-muted-foreground",e),...r})}).displayName="FormDescription";const T=e.forwardRef(({className:e,children:r,...a},i)=>{const{error:n,formMessageId:o}=M(),t=n?String(n?.message):r;return t?s.jsx("p",{ref:i,id:o,className:u("text-sm font-medium text-destructive",e),...a,children:t}):null});T.displayName="FormMessage";const O=o,V=e.forwardRef(({className:e,...r},a)=>s.jsx(t,{ref:a,className:u("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...r}));V.displayName=t.displayName;const G=e.forwardRef(({className:e,...r},a)=>s.jsx(l,{ref:a,className:u("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...r}));G.displayName=l.displayName;const U=e.forwardRef(({className:e,...r},a)=>s.jsx(d,{ref:a,className:u("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...r}));function B(){const[r,a]=f(),{user:i,loginMutation:n,registerMutation:o}=h(),{t:t}=p(),l=new URLSearchParams(window.location.search).get("tab")||void 0,[d,m]=e.useState(l||"login");return e.useEffect(()=>{"register"===l&&m("register"),"login"===l&&m("login")},[l]),e.useEffect(()=>{i&&a("/")},[i,a]),i?null:s.jsxs("div",{className:"flex flex-col min-h-screen md:flex-row bg-background",children:[s.jsxs(g,{variant:"ghost",className:"fixed z-20 flex items-center px-3 py-2 text-sm top-2 left-2 md:absolute md:top-4 md:left-4 md:z-0 md:text-base",onClick:()=>a("/"),children:[s.jsx(c,{className:"w-4 h-4 mr-2"}),s.jsx("span",{className:"hidden xs:inline",children:t?.backToDashboard||"Torna alla Dashboard"})]}),s.jsx("div",{className:"flex flex-1 flex-col items-center justify-center bg-primary/10 p-6 sm:p-10 text-center min-h-[260px] md:min-h-0",children:s.jsxs("div",{className:"w-full max-w-md mx-auto",children:[s.jsx("h1",{className:"mb-4 text-3xl font-bold leading-tight break-words sm:text-4xl",children:t?.serverStatus||"Service Status Dashboard"}),s.jsx("p",{className:"mb-6 text-base sm:text-lg text-muted-foreground",children:t?.heroDescription||"Monitora lo stato operativo dei vari servizi e piattaforme in tempo reale. Rimani informato su interruzioni e problemi di prestazione."}),s.jsxs("div",{className:"flex flex-wrap justify-center gap-3 text-sm sm:text-base",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),s.jsx("span",{children:t?.operational||"Operativo"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-3 h-3 rounded-full bg-amber-500"}),s.jsx("span",{children:t?.degraded||"Degradato"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full"}),s.jsx("span",{children:t?.down||"Non Operativo"})]})]})]})}),s.jsx("div",{className:"flex flex-col items-center justify-center flex-1 p-4 sm:p-6 md:p-10 bg-background",children:s.jsx("div",{className:"w-full max-w-sm mx-auto sm:max-w-md",children:s.jsxs(O,{value:d,onValueChange:e=>m(e),className:"w-full",children:[s.jsxs(V,{className:"grid w-full grid-cols-2 mb-6",children:[s.jsx(G,{value:"login",children:t?.login||"Accedi"}),s.jsx(G,{value:"register",children:t?.register||"Registrati"})]}),s.jsx(U,{value:"login",children:s.jsx(H,{isLoading:n?.isPending??!1,onSubmit:e=>n.mutate(e),t:t||{},onNavigateToReset:()=>a("/forgot-password")})}),s.jsx(U,{value:"register",children:s.jsx(K,{isLoading:o?.isPending??!1,onSubmit:e=>o.mutate(e),t:t||{}})})]})})})]})}function H({isLoading:e,onSubmit:r,t:a,onNavigateToReset:i}){const n=m({resolver:R(S),defaultValues:{username:"",password:""}});return s.jsxs(w,{children:[s.jsxs(b,{children:[s.jsx(N,{children:a.login||"Accedi"}),s.jsx(v,{children:a.loginDescription||"Inserisci le tue credenziali per accedere all'account"})]}),s.jsx(D,{...n,children:s.jsxs("form",{onSubmit:n.handleSubmit(e=>r(e)),children:[s.jsxs(y,{className:"space-y-4",children:[s.jsx(L,{control:n.control,name:"username",render:({field:e})=>s.jsxs(A,{children:[s.jsx(E,{children:a.email||"Email"}),s.jsx($,{children:s.jsx(F,{type:"email",placeholder:a.emailPlaceholder||"Inserisci la tua email",...e})}),s.jsx(T,{})]})}),s.jsx(L,{control:n.control,name:"password",render:({field:e})=>s.jsxs(A,{children:[s.jsx(E,{children:a.password||"Password"}),s.jsx($,{children:s.jsx(F,{type:"password",placeholder:a.passwordPlaceholder||"Inserisci la tua password",...e})}),s.jsx(T,{})]})})]}),s.jsxs("div",{className:"px-4 pb-4",children:[s.jsx("button",{type:"button",className:"text-sm text-primary hover:underline mb-3",onClick:()=>i&&i(),children:a.forgotPassword||"Hai dimenticato la password?"}),s.jsx(P,{children:s.jsx(g,{type:"submit",className:"w-full",disabled:e,children:e?s.jsxs(s.Fragment,{children:[s.jsx(x,{className:"w-4 h-4 mr-2 animate-spin"}),a.loggingIn||"Accesso in corso..."]}):a.login||"Accedi"})})]})]})})]})}function K({isLoading:e,onSubmit:r,t:a}){const i=I.extend({confirmPassword:C.string()}).refine(e=>e.password===e.confirmPassword,{message:a.passwordMismatch||"Le password non corrispondono",path:["confirmPassword"]}),n=m({resolver:R(i),defaultValues:{username:"",email:"",password:"",confirmPassword:"",role:"user"}});return s.jsxs(w,{children:[s.jsxs(b,{children:[s.jsx(N,{children:a.register||"Registrati"}),s.jsx(v,{children:a.registerDescription||"Crea un nuovo account per accedere alla dashboard"})]}),s.jsx(D,{...n,children:s.jsxs("form",{onSubmit:n.handleSubmit(e=>{const{confirmPassword:s,...a}=e;r(a)}),children:[s.jsxs(y,{className:"space-y-4",children:[s.jsx(L,{control:n.control,name:"username",render:({field:e})=>s.jsxs(A,{children:[s.jsx(E,{children:a.username||"Username"}),s.jsx($,{children:s.jsx(F,{placeholder:a.usernamePlaceholder||"Scegli un username",...e})}),s.jsx(T,{})]})}),s.jsx(L,{control:n.control,name:"email",render:({field:e})=>s.jsxs(A,{children:[s.jsx(E,{children:a.email||"Email"}),s.jsx($,{children:s.jsx(F,{type:"email",placeholder:a.emailPlaceholder||"Inserisci la tua email",...e})}),s.jsx(T,{})]})}),s.jsx(L,{control:n.control,name:"password",render:({field:e})=>s.jsxs(A,{children:[s.jsx(E,{children:a.password||"Password"}),s.jsx($,{children:s.jsx(F,{type:"password",placeholder:a.passwordPlaceholder||"Scegli una password",...e})}),s.jsx(T,{})]})}),s.jsx(L,{control:n.control,name:"confirmPassword",render:({field:e})=>s.jsxs(A,{children:[s.jsx(E,{children:a.confirmPassword||"Conferma Password"}),s.jsx($,{children:s.jsx(F,{type:"password",placeholder:a.confirmPasswordPlaceholder||"Conferma la tua password",...e})}),s.jsx(T,{})]})})]}),s.jsx(P,{children:s.jsx(g,{type:"submit",className:"w-full",disabled:e,children:e?s.jsxs(s.Fragment,{children:[s.jsx(x,{className:"w-4 h-4 mr-2 animate-spin"}),a.creatingAccount||"Creazione account in corso..."]}):a.register||"Registrati"})})]})})]})}U.displayName=d.displayName;export{B as default};
