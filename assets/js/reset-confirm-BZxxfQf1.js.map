{"version":3,"file":"reset-confirm-BZxxfQf1.js","sources":["../../../src/pages/reset-confirm.tsx"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { useLocation } from 'wouter';\r\nimport { Input } from '@/components/ui/input';\r\nimport { Button } from '@/components/ui/button';\r\nimport { useToast } from '@/hooks/use-toast';\r\nimport { apiRequest } from '@/lib/queryClient';\r\n\r\nexport default function ResetConfirmPage() {\r\n  const { toast } = useToast();\r\n  const [_, navigate] = useLocation();\r\n  const params = new URLSearchParams(window.location.search);\r\n  const token = params.get('token') || '';\r\n  const [password, setPassword] = useState('');\r\n  const [confirm, setConfirm] = useState('');\r\n  const [isPending, setPending] = useState(false);\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    if (!token) return toast({ title: 'Token mancante', description: 'Il token di reset non è presente nella URL', variant: 'destructive' });\r\n    if (!password) return toast({ title: 'Password mancante', description: 'Inserisci una password valida', variant: 'destructive' });\r\n    if (password !== confirm) return toast({ title: 'Password non coincidono', description: 'Le password non corrispondono', variant: 'destructive' });\r\n\r\n    setPending(true);\r\n    try {\r\n  const res = await apiRequest('POST', '/api/reset-password', { token, password });\r\n      await res.json();\r\n      toast({ title: 'Password aggiornata', description: 'La tua password è stata aggiornata con successo.' });\r\n  navigate('/auth');\r\n    } catch (err: any) {\r\n      toast({ title: 'Errore', description: err?.message || 'Si è verificato un errore', variant: 'destructive' });\r\n    } finally {\r\n      setPending(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"min-h-screen flex items-center justify-center\">\r\n      <form onSubmit={handleSubmit} className=\"w-full max-w-md p-6 bg-card rounded-lg\">\r\n        <h2 className=\"text-xl font-bold mb-4\">Imposta nuova password</h2>\r\n        <p className=\"text-sm text-muted-foreground mb-4\">Inserisci la nuova password per il tuo account.</p>\r\n        <label className=\"block mb-2\">Nuova password</label>\r\n        <Input type=\"password\" value={password} onChange={(e) => setPassword((e.target as HTMLInputElement).value)} />\r\n        <label className=\"block mt-3 mb-2\">Conferma password</label>\r\n        <Input type=\"password\" value={confirm} onChange={(e) => setConfirm((e.target as HTMLInputElement).value)} />\r\n        <div className=\"mt-4 flex gap-2\">\r\n          <Button type=\"submit\" disabled={isPending}>{isPending ? 'Invio...' : 'Imposta password'}</Button>\r\n          <Button variant=\"secondary\" onClick={() => navigate('/')} type=\"button\">Annulla</Button>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n"],"names":["ResetConfirmPage","toast","useToast","_","navigate","useLocation","token","URLSearchParams","window","location","search","get","password","setPassword","useState","confirm","setConfirm","isPending","setPending","jsx","className","children","onSubmit","async","e","preventDefault","title","description","variant","res","apiRequest","json","err","message","Input","type","value","onChange","target","jsxs","Button","disabled","onClick"],"mappings":"qRAOA,SAAwBA,IACtB,MAAMC,MAAEA,GAAUC,KACXC,EAAGC,GAAYC,IAEhBC,EADS,IAAIC,gBAAgBC,OAAOC,SAASC,QAC9BC,IAAI,UAAY,IAC9BC,EAAUC,GAAeC,EAAAA,SAAS,KAClCC,EAASC,GAAcF,EAAAA,SAAS,KAChCG,EAAWC,GAAcJ,EAAAA,UAAS,GAqBzC,OACEK,EAAAA,IAAC,OAAIC,UAAU,gDACbC,gBAAC,OAAA,CAAKC,SArBWC,MAAOC,IAE1B,GADAA,EAAEC,kBACGnB,EAAO,OAAOL,EAAM,CAAEyB,MAAO,iBAAkBC,YAAa,6CAA8CC,QAAS,gBACxH,IAAKhB,EAAU,OAAOX,EAAM,CAAEyB,MAAO,oBAAqBC,YAAa,gCAAiCC,QAAS,gBACjH,GAAIhB,IAAaG,EAAS,OAAOd,EAAM,CAAEyB,MAAO,0BAA2BC,YAAa,gCAAiCC,QAAS,gBAElIV,GAAW,GACX,IACF,MAAMW,QAAYC,EAAW,OAAQ,sBAAuB,CAAExB,QAAOM,mBAC3DiB,EAAIE,OACV9B,EAAM,CAAEyB,MAAO,sBAAuBC,YAAa,qDACvDvB,EAAS,QACP,OAAS4B,GACP/B,EAAM,CAAEyB,MAAO,SAAUC,YAAaK,GAAKC,SAAW,4BAA6BL,QAAS,eAC9F,CAAA,QACEV,GAAW,EACb,GAKgCE,UAAU,yCACtCC,SAAA,CAAAF,EAAAA,IAAC,KAAA,CAAGC,UAAU,yBAAyBC,SAAA,2BACvCF,EAAAA,IAAC,IAAA,CAAEC,UAAU,qCAAqCC,SAAA,oDAClDF,EAAAA,IAAC,QAAA,CAAMC,UAAU,aAAaC,SAAA,mBAC9BF,EAAAA,IAACe,EAAA,CAAMC,KAAK,WAAWC,MAAOxB,EAAUyB,SAAWb,GAAMX,EAAaW,EAAEc,OAA4BF,SACpGjB,EAAAA,IAAC,QAAA,CAAMC,UAAU,kBAAkBC,SAAA,sBACnCF,EAAAA,IAACe,EAAA,CAAMC,KAAK,WAAWC,MAAOrB,EAASsB,SAAWb,GAAMR,EAAYQ,EAAEc,OAA4BF,SAClGG,EAAAA,KAAC,MAAA,CAAInB,UAAU,kBACbC,SAAA,CAAAF,EAAAA,IAACqB,GAAOL,KAAK,SAASM,SAAUxB,EAAYI,SAAAJ,EAAY,WAAa,qBACrEE,EAAAA,IAACqB,EAAA,CAAOZ,QAAQ,YAAYc,QAAS,IAAMtC,EAAS,KAAM+B,KAAK,SAASd,SAAA,mBAKlF"}