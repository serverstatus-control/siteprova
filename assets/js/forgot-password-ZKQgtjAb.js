import{r as e,j as s}from"./react-vendor-BC-NryIe.js";import{u as r}from"./router-MOUxwqPK.js";import{I as a}from"./input-9JScP5_X.js";import{C as t,x as i,y as l,z as n,A as o,E as c,B as d}from"./index-DKvbMkMl.js";import"./vendor-BQl0nyRy.js";import"./radix-ui-ByoYm48K.js";import"./forms-Cf6uUqBP.js";function m(){const[m,u]=r(),[p,x]=e.useState(""),[j,f]=e.useState(null),[h,v]=e.useState(!1);return s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background p-4",children:s.jsx("div",{className:"w-full max-w-sm",children:s.jsxs(t,{className:"border-border/40 shadow-lg",children:[s.jsxs(i,{className:"space-y-3",children:[s.jsx(l,{className:"text-2xl text-center font-semibold",children:"Recupero Password"}),s.jsx(n,{className:"text-center text-muted-foreground",children:"Inserisci la tua email per ricevere il link di reset. Ti invieremo una email con le istruzioni per reimpostare la password."})]}),s.jsxs("form",{onSubmit:async e=>{e.preventDefault(),v(!0),f(null);try{const e=await fetch("/api/forgot-password",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({email:p})}),s=await e.json().catch(()=>({}));f(s?.message||"Se l'email Ã¨ registrata, riceverai istruzioni per il reset."),s?.token&&(f(e=>`${e}\nToken di test: ${s.token}`),setTimeout(()=>{},0))}catch(s){f("Errore di rete")}finally{v(!1)}},children:[s.jsxs(o,{className:"space-y-4 pt-2",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-sm font-medium text-foreground/90",children:"Email"}),s.jsx(a,{type:"email",value:p,onChange:e=>x(e.target.value),placeholder:"La tua email",className:"h-10",required:!0})]}),j&&s.jsx("div",{className:"p-3 rounded-md text-sm "+(j.includes("error")?"bg-destructive/10 text-destructive border border-destructive/20":"bg-muted/50 text-muted-foreground border border-border/50"),children:j})]}),s.jsxs(c,{className:"flex-col space-y-2",children:[s.jsx(d,{type:"submit",className:"w-full",disabled:h,children:h?s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("i",{className:"fas fa-spinner fa-spin"}),s.jsx("span",{children:"Invio in corso..."})]}):"Invia link di reset"}),s.jsx(d,{variant:"ghost",type:"button",onClick:()=>u("/auth"),className:"w-full",children:"Torna al login"})]})]})]})})})}export{m as default};
