import{r as e,j as s}from"./react-vendor-BCKZ37BP.js";import{u as a}from"./router-CS916hjU.js";import{I as t}from"./input-D-0FROTB.js";import{h as r,B as o,w as n}from"./index-DaxsI7ea.js";import"./vendor-C1u4FD2K.js";import"./radix-ui-ByoYm48K.js";import"./forms-B8vtVtS4.js";function i(){const{toast:i}=r(),[c,d]=a(),l=new URLSearchParams(window.location.search).get("token")||"",[m,u]=e.useState(""),[p,v]=e.useState(""),[w,j]=e.useState(!1);return s.jsx("div",{className:"min-h-screen flex items-center justify-center",children:s.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),!l)return i({title:"Token mancante",description:"Il token di reset non è presente nella URL",variant:"destructive"});if(!m)return i({title:"Password mancante",description:"Inserisci una password valida",variant:"destructive"});if(m!==p)return i({title:"Password non coincidono",description:"Le password non corrispondono",variant:"destructive"});j(!0);try{const e=await n("POST","/api/reset-password",{token:l,password:m});await e.json(),i({title:"Password aggiornata",description:"La tua password è stata aggiornata con successo."}),d("/auth")}catch(s){i({title:"Errore",description:s?.message||"Si è verificato un errore",variant:"destructive"})}finally{j(!1)}},className:"w-full max-w-md p-6 bg-card rounded-lg",children:[s.jsx("h2",{className:"text-xl font-bold mb-4",children:"Imposta nuova password"}),s.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Inserisci la nuova password per il tuo account."}),s.jsx("label",{className:"block mb-2",children:"Nuova password"}),s.jsx(t,{type:"password",value:m,onChange:e=>u(e.target.value)}),s.jsx("label",{className:"block mt-3 mb-2",children:"Conferma password"}),s.jsx(t,{type:"password",value:p,onChange:e=>v(e.target.value)}),s.jsxs("div",{className:"mt-4 flex gap-2",children:[s.jsx(o,{type:"submit",disabled:w,children:w?"Invio...":"Imposta password"}),s.jsx(o,{variant:"secondary",onClick:()=>d("/"),type:"button",children:"Annulla"})]})]})})}export{i as default};
//# sourceMappingURL=reset-confirm-CG9nTY15.js.map
